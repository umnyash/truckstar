"use strict";function initFormResending(t,e){function r(){console.log("Начата попытка отправить данные."),t.removeListener(FormEvents.SUBMIT_START,r),t.addListener(FormEvents.SUBMIT_END,o),e.button.disabled=!0,e.button.classList.add("button--pending")}function o(){console.log("Попытка отправить данные завершена."),t.removeListener(FormEvents.SUBMIT_END,o),e.close()}e.button.addEventListener("click",(e=>{e.preventDefault(),t.addListener(FormEvents.SUBMIT_START,r),t.formElement.requestSubmit()}))}console.log("Подключён временный файл для демонстрации."),subscriptionForm&&subscriptionForm.setHandlers((t=>{console.log("Распарсенный ответ сервера:",t),showAlert({heading:"Спасибо за подписку",text:"Вы успешно подписались на email рассылку"})}),(t=>{console.log("Распарсенный ответ сервера:",t);const e=showAlert({heading:"Ошибка",status:"error",text:"Не удалось подписаться на рассылку"});initFormResending(subscriptionForm,e)})),callbackModalForm&&callbackModalForm.setHandlers((t=>{showAlert({heading:"Ваша заявка успешно отправлена",text:"Наш менеджер свяжется с вам в течение дня"})}),(t=>{const e=showAlert({heading:"Ошибка",status:"error",text:"Не удалось отправить заявку"});initFormResending(callbackModalForm.form,e)})),buyModalForm&&buyModalForm.setHandlers((t=>{showAlert({heading:"Ваша заявка успешно отправлена",text:"Наш менеджер свяжется с вам в течение дня"})}),(t=>{const e=showAlert({heading:"Ошибка",status:"error",text:"Не удалось отправить заявку"});initFormResending(buyModalForm.form,e)})),requestForm&&requestForm.setHandlers((t=>{showAlert({heading:"Ваша заявка успешно отправлена",text:"Наш менеджер свяжется с вам в течение дня"})}),(t=>{const e=showAlert({heading:"Ошибка",status:"error",text:"Не удалось отправить заявку"});initFormResending(requestForm,e)})),reviewModalForm&&reviewModalForm.setHandlers((t=>{showAlert({heading:"Спасибо, что оценили нашу работу",mode:"alter",text:"Ваш отзыв будет проверен модератором сайта, и опубликован в течение 2 рабочих дней"})}),(t=>{const e=showAlert({heading:"Ошибка",status:"error",text:"Не удалось отправить заявку"});initFormResending(reviewModalForm.form,e)}));let cartModalAlert=null;const cartModalAlertElement=document.querySelector(".modal--with_cart-alert");cartModalAlertElement&&(cartModalAlert=new Modal(cartModalAlertElement)),document.addEventListener("click",(t=>{const e=t.target.closest("[data-product-cart-button]");if(!e)return;const r=e.closest(".product-card, .product");r.querySelector(".counter__control").value++;const o=r.matches(".product-card")?"product-card--in-cart":"product--in-cart";r.classList.add(o),cartModalAlert&&cartModalAlert.open()})),cart?.form&&cart.form.setHandlers((t=>{window.location.href="https://umnyash.github.io/truckstar/order.html"}),(t=>{const e=showAlert({heading:"Ошибка",status:"error",text:"Не удалось отправить заказ"});initFormResending(cart.form,e)})),modalEntry&&(modalEntry.codeForm.setHandlers((t=>{console.info("Запрошен код"),modalEntry.switchStep(2)}),(t=>{showAlert({heading:"Ошибка",status:"error",text:"Не удалось получить код"})})),modalEntry.loginForm.setHandlers((t=>{console.info("Авторизация произошла"),modalEntry.close(),modalEntry.switchStep(1)}),(t=>{showAlert({heading:"Ошибка",status:"error",text:"Не удалось отправить код"})})));const mockReviewsData=[{author:"Кирилл",text:"Отличное место, помогли с подбором и выбором запчастей, хорошо упаковали и оперативно отправили, рекомендую.",rating:5,date:"2024-07-08"},{author:"Кирилл",text:"Отличное место, помогли с подбором и выбором запчастей, хорошо упаковали и оперативно отправили, рекомендую. Отличное место, помогли с подбором и выбором запчастей, хорошо упаковали и оперативно отправили, рекомендую. Отличное место, помогли с подбором и выбором запчастей, хорошо упаковали и оперативно отправили, рекомендую.",rating:4,date:"2024-07-25"},{author:"Кирилл",text:"Отличное место, помогли с подбором и выбором запчастей, хорошо упаковали и оперативно отправили, рекомендую.",rating:3,date:"2024-07-26"},{author:"Кирилл",text:"Отличное место, помогли с подбором и выбором запчастей, хорошо упаковали и оперативно отправили, рекомендую. Отличное место, помогли с подбором и выбором запчастей, хорошо упаковали и оперативно отправили, рекомендую. Отличное место, помогли с подбором и выбором запчастей, хорошо упаковали и оперативно отправили, рекомендую.",rating:2,date:"2024-07-26"},{author:"Кирилл",text:"Отличное место, помогли с подбором и выбором запчастей, хорошо упаковали и оперативно отправили, рекомендую.",rating:1,date:"2024-08-08"}],reviewsListWrapperElement=document.querySelector(".reviews-list");if(reviewsListWrapperElement){const t=reviewsListWrapperElement.querySelector(".reviews-list__items");reviewsListWrapperElement.querySelector(".reviews-list__button-wrapper .button").addEventListener("click",(e=>{e.preventDefault(),t.insertAdjacentHTML("beforeend",mockReviewsData.map(createReviewsListItemString).join(""))}))}