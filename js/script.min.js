"use strict";const LAPTOP_WIDTH_MEDIA_QUERY="(min-width: 1280px)",DESKTOP_WIDTH_MEDIA_QUERY="(min-width: 1366px)",MEDIUM_INTERACTION_DURATION=400,MODAL_ANIMATION_DURATION=500;function lockPageScroll(){const e=document.body.clientWidth;document.body.classList.add("scroll-lock"),document.body.clientWidth!==e&&(document.body.style.paddingRight=document.body.clientWidth-e+"px")}function unlockPageScroll(){document.body.classList.remove("scroll-lock"),document.body.style.paddingRight="0"}function getPaginationButtonCreator(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Слайд";return(t,n)=>`\n    <button class='${n}' type='button'>\n      <span class='visually-hidden'>${e} ${t+1}.</span>\n    </button>\n  `}function debounce(e){var t=this;let n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];clearTimeout(n),n=setTimeout((()=>e.apply(t,i)),o)}}function throttle(e,t){var n=this;let o,s=0;return function(){for(var i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];const a=new Date;clearTimeout(o),o=setTimeout((()=>e.apply(n,r)),t),a-s>=t&&(e.apply(n,r),s=a)}}function createElementByString(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}async function sendData(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{};try{const o=await fetch(e,{method:"POST",body:t});if(!o.ok){const e=await o.text();throw new Error(`${o.status} – ${o.statusText}: ${e}`)}n(await o.json())}catch(e){console.error(e.message),o()}finally{s()}}class Modal{constructor(e){this.modalElement=e,this.name=e.dataset.modal,this.initOpeners(),this.closebutton=this.modalElement.querySelector(".modal__close-button"),this.closebutton.addEventListener("click",(()=>this.close())),this.modalElement.addEventListener("close",(()=>this.onModalClose())),document.body.contains(this.modalElement)||document.body.append(this.modalElement)}initOpeners=()=>{document.querySelectorAll(`[data-modal-opener="${this.name}"]`).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),this.open()}))}))};open=()=>{lockPageScroll(),requestAnimationFrame((()=>{this.modalElement.showModal()}))};close=()=>{this.modalElement.close()};onModalClose=()=>{setTimeout((()=>{unlockPageScroll(),this.modalElement.classList.contains("modal--with_alert")&&(this.modalElement.remove(),this.modalElement=null)}),500)}}class Alert extends Modal{constructor(e){let{heading:t,status:n,text:o,buttonText:s}=e;const i=Alert.createElement({heading:t,status:n,text:o,buttonText:s});document.body.append(i),super(i),i.querySelector(".alert__button").addEventListener("click",(e=>{e.preventDefault(),this.close()}))}static createElement(e){let{heading:t,status:n,text:o,buttonText:s}=e;return createElementByString(`\n      <dialog class="modal modal--position_center modal--with_alert">\n        <div class="modal__inner">\n          <button class="modal__close-button" type="button">\n            <span class="visually-hidden">Закрыть</span>\n          </button>\n          <section class="alert modal__alert ${"error"===n?"alert--error":""}">\n            <h2 class="alert__heading heading">${t}</h2>\n            ${o?`<p class="alert__text">${o}</p>`:""}\n            <button class="alert__button button--secondary button--right button--size_l" type="button">\n              <span class="button__inner">${s||"Закрыть"}<span class="button__icon"></span></span>\n            </button>\n          </section>\n        </div>\n      </dialog>\n    `)}}class FormValidator{constructor(e){this.formElement=e,this.addCustomErrorMessages(),this.pristine=new Pristine(e,{classTo:"pristine-item",errorClass:"pristine-item--invalid",errorTextParent:"pristine-item",errorTextTag:"p",errorTextClass:"pristine-item__error-text"})}addCustomErrorMessages(){const e=this.formElement.querySelector('[data-name="name"]'),t=this.formElement.querySelector('[data-name="phone"]'),n=this.formElement.querySelector('[data-name="message"]');e&&(e.closest(".text-field").classList.add("pristine-item"),e.dataset.pristinePattern="/^[a-zа-яЁё -]+$/i",e.dataset.pristineRequiredMessage="Заполните это поле.",e.dataset.pristinePatternMessage="Допустимы только буквы, дефисы и пробелы."),t&&(t.closest(".text-field").classList.add("pristine-item"),t.dataset.pristineRequiredMessage="Заполните это поле."),n&&(n.closest(".text-area").classList.add("pristine-item"),n.dataset.pristineRequiredMessage="Заполните это поле.")}validate(){return this.pristine.validate()}reset(){this.pristine.reset()}}class Form{constructor(e){this.formElement=e,this.formInnerElement=this.formElement.querySelector("[data-form-inner]"),this.textFieldControlElements=this.formElement.querySelectorAll(".text-field__control"),this.actionUrl=this.formElement.action,this.submitButtonElement=this.formElement.querySelector("[data-submit-button]"),this.validator=new FormValidator(this.formElement),this.successHandler=null,this.errorHandler=null,this.init()}setHandlers=(e,t)=>{this.successHandler=e,this.errorHandler=t};init=()=>{this.formElement.addEventListener("submit",(e=>{e.preventDefault();this.validator.validate()?(this.submitButtonElement.disabled=!0,this.submitButtonElement.classList.add("button--pending"),sendData(this.actionUrl,new FormData(e.target),(e=>{this.formElement.reset(),this.successHandler(e)}),(e=>{this.errorHandler(e)}),(()=>{this.submitButtonElement.disabled=!1,this.submitButtonElement.classList.remove("button--pending")}))):(this.formInnerElement.classList.remove("shake"),setTimeout((()=>this.formInnerElement.classList.add("shake")),50))})),this.formElement.addEventListener("reset",(()=>{setTimeout((()=>{this.textFieldControlElements.forEach((e=>{e.dispatchEvent(inputEvent)})),this.validator.reset()}),0)}))}}class ModalForm extends Modal{constructor(e){super(e),this.formElement=e.querySelector(".modal-form"),this.form=new Form(this.formElement)}setHandlers=(e,t)=>{this.form.setHandlers((()=>{e(),this.modalElement.close()}),(()=>{t()}))}}function initBannerSlider(e){new Swiper(e,{effect:"fade",fadeEffect:{crossFade:!0},loop:!0,speed:1400,allowTouchMove:!1,autoplay:{delay:1e3,disableOnInteraction:!1}})}class Cart{#e=null;#t=null;#n=window.matchMedia("(min-width: 1280px)");constructor(e){let{cartElement:t}=e;this.#e=t}#o=()=>{if(this.#n.matches)return;const e=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),t=document.documentElement.clientHeight+window.scrollY>=e;this.#t.classList.toggle("cart-form__footer--sticked",!t)};#s=()=>{if(this.#n.matches)document.body.style.paddingBottom=0;else{const e=parseFloat(getComputedStyle(this.#t).bottom);document.body.style.paddingBottom=`${this.#t.offsetHeight+e}px`}};#i=debounce(this.#s,500);#r=throttle(this.#o,100);init(){this.#t=this.#e.querySelector(".cart-form__footer"),this.#t&&(this.#s(),this.#o(),window.addEventListener("resize",this.#i),window.addEventListener("scroll",this.#r))}}function initCart(e){let{cartElement:t}=e;new Cart({cartElement:t}).init()}function initCatalogNavigation(e){const t=e.querySelector(".catalog-navigation__inner"),n=t.querySelector(".catalog-navigation__list"),o=document.querySelector(".catalog__navigation-opener"),s=window.matchMedia("(min-width: 1280px)");let i=null;function r(){l()}function l(){e.classList.remove("catalog-navigation--open"),i=setTimeout((()=>{e.classList.add("catalog-navigation--hidden"),unlockPageScroll()}),400),s.removeEventListener("change",r)}new SimpleBar(n,{autoHide:!1}),t.addEventListener("click",(e=>{const t=e.target.closest(".catalog-navigation__group-heading");if(t){e.preventDefault();t.closest(".catalog-navigation__group").classList.toggle("catalog-navigation__group--open")}else e.target.closest(".catalog-navigation__close-button")&&l()})),o.addEventListener("click",(t=>{t.preventDefault(),s.matches||lockPageScroll(),clearTimeout(i),e.classList.remove("catalog-navigation--hidden"),setTimeout((()=>{e.classList.add("catalog-navigation--open"),s.addEventListener("change",r)}),0)}))}function initCheckerCardsList(e){const t=Array.from(e.querySelectorAll(".checker-cards__item")),n=()=>{e.style.setProperty("--item-min-height",0),setTimeout((()=>{const n=t.map((e=>e.offsetHeight)),o=`${Math.max(...n)}px`;e.style.setProperty("--item-min-height",o)}),0)};n(),window.addEventListener("resize",debounce(n))}function initDropdown(e){const t=e.querySelector(".dropdown__list-items"),n=window.matchMedia("(min-width: 1280px)");let o=null;function s(t){t.target.closest(".dropdown")!==e&&i()}function i(){e.classList.remove("dropdown--open"),o=setTimeout((()=>{unlockPageScroll()}),400),document.removeEventListener("click",s)}new SimpleBar(t,{autoHide:!1}),e.addEventListener("click",(t=>{if(t.target.closest(".dropdown__toggle-button"))e.classList.contains("dropdown--open")?i():function(){n.matches||lockPageScroll();clearTimeout(o),e.classList.add("dropdown--open"),setTimeout((()=>{document.addEventListener("click",s)}),0)}();else{const n=t.target.closest(".dropdown__list-item");if(n){const t=n.querySelector(".dropdown__option-label, .dropdown__link");e.querySelector(".dropdown__toggle-button-text").textContent=t.textContent,t.classList.contains("dropdown__link")&&(e.querySelector(".dropdown__link--active")?.classList.remove("dropdown__link--active"),t.classList.add("dropdown__link--active")),i()}else t.target.closest(".dropdown__close-button")&&i()}}))}const initFolds=e=>{e.addEventListener("click",(e=>{let{target:t}=e;const n=t.closest(".folds__button");if(!n)return;const o=n.closest(".folds__item"),s=o.querySelector(".folds__item-content-wrapper"),i=s.querySelector(".folds__item-content"),r=i.getBoundingClientRect().height;s.style.height=`${r}px`,i.style.position="absolute",setTimeout((()=>{o.classList.toggle("folds__item--open")}),20),n.ariaExpanded="true"===n.ariaExpanded?"false":"true"})),e.addEventListener("transitionend",(e=>{let{target:t}=e;const n=t.closest(".folds__item");n&&n.classList.contains("folds__item--open")&&(t.classList.contains("folds__item-content")&&(t.style.position="static"),t.classList.contains("folds__item-content-wrapper")&&setTimeout((()=>{t.style.height="auto"}),0))}))};function initMenu(e){const t=e.querySelector(".menu__content"),n=document.querySelector(".site-header__burger"),o=document.querySelector(".menu__button--close");n.addEventListener("click",(t=>{t.preventDefault(),lockPageScroll(),e.showModal()})),o.addEventListener("click",(t=>{t.preventDefault(),e.close(),setTimeout((()=>{unlockPageScroll()}),400)})),new SimpleBar(t,{autoHide:!1});const s=e.querySelector(".menu__headings"),i=s.querySelectorAll(".menu__heading[data-name]"),r=e.querySelector(".menu__catalog-navigation"),l=r.querySelectorAll(".menu__catalog-navigation-section");s.addEventListener("click",(e=>{const t=e.target.dataset.name;if(t)for(let e=0;e<l.length;e++)i[e].classList.toggle("menu__heading--active",i[e].dataset.name===t),l[e].classList.toggle("menu__catalog-navigation-section--active",l[e].dataset.name===t)}));const a=[],c=e.querySelector(".menu__heading--group"),d=e.querySelector(".menu__button--back");r.addEventListener("click",(t=>{const n=t.target.closest(".menu__catalog-navigation-button");if(!n)return;c.textContent=n.textContent;const o=n.parentElement,s=o.parentElement.dataset.level;e.dataset.level=+s+1,o.classList.add("menu__catalog-navigation-item--active"),a.push(o)})),d.addEventListener("click",(t=>{t.preventDefault(),e.dataset.level=Math.max(0,+e.dataset.level-1),a.pop()?.classList.remove("menu__catalog-navigation-item--active"),c.textContent=a.at(-1)?.querySelector(".menu__catalog-navigation-button").textContent}))}function initPhotoSlider(e){const t=e.querySelector(".photo-slider__main-slider"),n=e.querySelector(".photo-slider__thumbnails-slider"),o=new Swiper(n,{watchSlidesProgress:!0,slidesPerView:3,spaceBetween:8,spaceBetween:10,breakpoints:{768:{slidesPerView:6,spaceBetween:8},1366:{slidesPerView:6,spaceBetween:12},1920:{slidesPerView:6,spaceBetween:20}}});new Swiper(t,{effect:"fade",fadeEffect:{crossFade:!0},pagination:{el:".photo-slider__main-slider-pagination",bulletClass:"photo-slider__pagination-button",bulletActiveClass:"photo-slider__pagination-button--current",renderBullet:getPaginationButtonCreator(),clickable:!0},thumbs:{swiper:o,slideThumbActiveClass:"photo-slider__thumbnails-slider-item--active"}})}function initProcessSlider(e){const t=e.querySelector(".process-slider"),n=e.querySelector(".slider-arrows__button--prev"),o=e.querySelector(".slider-arrows__button--next");new Swiper(t,{slidesPerView:2,spaceBetween:15,navigation:{prevEl:n,nextEl:o,disabledClass:"slider-arrows__button--disabled"},breakpoints:{768:{spaceBetween:20},1366:{spaceBetween:30},1920:{spaceBetween:40}}})}function initProductsSlider(e){const t=e.querySelector(".products-slider"),n=e.querySelector(".slider-arrows__button--prev"),o=e.querySelector(".slider-arrows__button--next");new Swiper(t,{slidesPerView:2,spaceBetween:15,navigation:{prevEl:n,nextEl:o,disabledClass:"slider-arrows__button--disabled"},breakpoints:{768:{slidesPerView:3,spaceBetween:15},1280:{slidesPerView:4,spaceBetween:20},1366:{slidesPerView:4,spaceBetween:30},1920:{slidesPerView:4,spaceBetween:40}}})}function showAlert(e){let{heading:t,status:n,text:o,buttonText:s}=e;new Alert({heading:t,status:n,text:o,buttonText:s}).open()}function initSimpleForm(e){const t=e.querySelector(".simple-form__control"),n=e.querySelector(".simple-form__button--clear"),o=()=>{e.classList.toggle("simple-form--empty",!t.value)};o(),e.addEventListener("input",(()=>{o()})),n.addEventListener("click",(()=>{t.value="",o(),t.focus()}))}function initSiteHeader(e){const t=e.querySelector(".shortcuts__link--user"),n=e.querySelector(".shortcuts__item--user .shortcuts__menu");let o=null;function s(e){(e.target.closest(".shortcuts__menu-close-button")||e.target.closest(".shortcuts__menu-link"))&&r()}function i(){r()}function r(){n.classList.remove("shortcuts__menu--open"),o=setTimeout((()=>{unlockPageScroll()}),400),document.removeEventListener("click",s),laptopWidthMediaQueryList.removeEventListener("change",i)}t.addEventListener("click",(e=>{t.classList.contains("shortcuts__link--user_not-authorized")||laptopWidthMediaQueryList.matches||(lockPageScroll(),clearTimeout(o),n.classList.add("shortcuts__menu--open"),setTimeout((()=>{document.addEventListener("click",s),laptopWidthMediaQueryList.addEventListener("change",i)}),0))}));let l=0;const a=()=>{const t=e.offsetHeight;window.scrollY>0&&e.classList.add("site-header--sticked"),window.scrollY>l&&window.scrollY>t?e.classList.add("site-header--hidden"):(e.classList.remove("site-header--hidden"),0===window.scrollY&&e.classList.remove("site-header--sticked")),l=window.scrollY};window.addEventListener("scroll",a),a();const c=e.querySelector(".site-header__search-form"),d=e.querySelector(".site-header__search-form-outer-wrapper"),u=c.querySelector(".site-header__search-form form"),m=document.querySelector(".site-header__user-navigation-link--search");function h(){desktopWidthMediaQueryList.matches?c.append(u):d.append(u)}desktopWidthMediaQueryList.addEventListener("change",h),h(),m.addEventListener("click",(t=>{t.preventDefault(),e.classList.toggle("site-header--show-outer-search-form")}))}function initTextArea(e){const t=e.querySelector(".text-area__control"),n=()=>{e.classList.toggle("text-area--empty",!t.value)};n(),t.addEventListener("input",(()=>{n()}))}function initTextField(e){const t=e.querySelector(".text-field__control"),n=e.querySelector(".text-field__button--clear"),o=()=>{e.classList.toggle("text-field--empty",!t.value)};o(),t.addEventListener("input",(()=>{o()})),n.addEventListener("click",(()=>{t.value="",o(),t.focus()}))}const laptopWidthMediaQueryList=window.matchMedia("(min-width: 1280px)"),desktopWidthMediaQueryList=window.matchMedia("(min-width: 1366px)"),inputEvent=new Event("input",{bubbles:!0});initSiteHeader(document.querySelector(".site-header"));let cart=null;const cartElement=document.querySelector(".cart");cartElement&&(cart=initCart({cartElement:cartElement})),document.querySelectorAll(".banner-slider").forEach(initBannerSlider),document.querySelectorAll(".folds").forEach(initFolds),document.querySelectorAll(".simple-form").forEach(initSimpleForm),document.querySelectorAll(".products").forEach(initProductsSlider),document.querySelectorAll(".process").forEach(initProcessSlider),document.querySelectorAll(".photo-slider").forEach(initPhotoSlider),document.querySelectorAll(".checker-cards__list").forEach(initCheckerCardsList),document.querySelectorAll(".text-field").forEach(initTextField),document.querySelectorAll(".text-area").forEach(initTextArea),document.querySelectorAll(".dropdown").forEach(initDropdown),document.querySelectorAll(".catalog-navigation").forEach(initCatalogNavigation),document.querySelectorAll(".menu").forEach(initMenu);let requestForm=null;const requestFormElement=document.querySelector(".request-form");requestFormElement&&(requestForm=new Form(requestFormElement));let callbackModalForm=null,callbackModalFormElement=document.querySelector('[data-modal="callback-form"]');callbackModalFormElement&&(callbackModalForm=new ModalForm(callbackModalFormElement));