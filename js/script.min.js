"use strict";const LAPTOP_WIDTH_MEDIA_QUERY="(min-width: 1280px)",DESKTOP_WIDTH_MEDIA_QUERY="(min-width: 1366px)",MEDIUM_INTERACTION_DURATION=400,MODAL_ANIMATION_DURATION=500,CODE_LENGTH=4,FormEvents={SUBMIT_START:"formSubmitStart",SUBMIT_END:"formSubmitEnd"},PHOTO_TYPES=["jpg","jpeg","png"];function lockPageScroll(){const e=document.body.clientWidth;document.body.classList.add("scroll-lock"),document.body.clientWidth!==e&&(document.body.style.paddingRight=document.body.clientWidth-e+"px")}function unlockPageScroll(){document.body.classList.remove("scroll-lock"),document.body.style.paddingRight="0"}function getPaginationButtonCreator(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Слайд";return(t,n)=>`\n    <button class='${n}' type='button'>\n      <span class='visually-hidden'>${e} ${t+1}.</span>\n    </button>\n  `}function debounce(e){var t=this;let n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];clearTimeout(n),n=setTimeout((()=>e.apply(t,s)),o)}}function throttle(e,t){var n=this;let o,i=0;return function(){for(var s=arguments.length,r=new Array(s),l=0;l<s;l++)r[l]=arguments[l];const a=new Date;clearTimeout(o),o=setTimeout((()=>e.apply(n,r)),t),a-i>=t&&(e.apply(n,r),i=a)}}function createElementByString(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}async function sendData(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{};try{const o=await fetch(e,{method:"POST",body:t});if(!o.ok){const e=await o.text();throw new Error(`${o.status} – ${o.statusText}: ${e}`)}n(await o.json())}catch(e){console.error(e.message),o()}finally{i()}}class PubSub{constructor(){this.listeners={}}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}removeListener(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter((e=>e!==t)))}emit(e,t){this.listeners[e]&&this.listeners[e].forEach((e=>e(t)))}}class Modal{static openModalsCount=0;constructor(e){let{onOpenerClick:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.modalElement=e,this.name=e?.dataset.modal,this.initOpeners(),this.modalElement.addEventListener("close",(()=>this.onModalClose())),this.onOpenerClick=t,this.modalElement.addEventListener("click",(e=>{(e.target===this.modalElement||e.target.closest("[data-modal-close-button]"))&&(e.preventDefault(),this.close())})),document.body.contains(this.modalElement)||document.body.append(this.modalElement)}initOpeners=()=>{document.querySelectorAll(`[data-modal-opener="${this.name}"]`).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),this.onOpenerClick&&this.onOpenerClick(e),this.open()}))}))};open=()=>{lockPageScroll(),requestAnimationFrame((()=>{this.modalElement.showModal(),Modal.openModalsCount++}))};close=()=>{this.modalElement.close()};onModalClose=()=>{Modal.openModalsCount--,setTimeout((()=>{Modal.openModalsCount||unlockPageScroll(),this.modalElement.classList.contains("modal--with_alert")&&(this.modalElement.remove(),this.modalElement=null)}),500)}}class Alert extends Modal{constructor(e){let{heading:t,status:n="success",mode:o,text:i}=e;const s=Alert.createElement({heading:t,status:n,mode:o,text:i});document.body.append(s),super(s),this.button=s.querySelector(".alert__button")}static createElement(e){let{heading:t,status:n,mode:o,text:i}=e;return createElementByString(`\n      <dialog class="modal modal--position_center modal--with_alert">\n        <div class="modal__inner">\n          <button class="modal__button modal__button--close" type="button" data-modal-close-button>\n            <span class="visually-hidden">Закрыть</span>\n          </button>\n          <section class="alert modal__alert ${"error"===n?"alert--error":""} ${"alter"===o?"alert--alter":""}">\n            <h2 class="alert__heading heading">${t}</h2>\n            ${i?`<p class="alert__text">${i}</p>`:""}\n            <button class="alert__button button button--secondary button--right button--size_l" type="button" ${"success"===n&&"data-modal-close-button"}>\n              <span class="button__inner">${"error"===n?"Повторить":"Закрыть"}<span class="button__icon"></span></span>\n            </button>\n          </section>\n        </div>\n      </dialog>\n    `)}}class FormValidator{constructor(e){this.formElement=e,this.addCustomErrorMessages(),this.init()}addCustomErrorMessages(){const e=this.formElement.querySelector('[data-name="name"]'),t=this.formElement.querySelector('[data-name="surname"]'),n=this.formElement.querySelector('[data-name="address"]'),o=this.formElement.querySelector('[data-name="phone"]'),i=this.formElement.querySelector('[data-name="email"]'),s=this.formElement.querySelector('[data-name="message"]'),r=this.formElement.querySelector(".simple-form__control");r&&(r.closest(".simple-form").classList.add("pristine-item"),r.dataset.pristineRequiredMessage="Заполните это поле.","email"===r.type&&(r.dataset.pristineEmailMessage="Введите корректный e-mail адрес.")),e&&(e.closest(".text-field").classList.add("pristine-item"),e.dataset.pristinePattern="/^[a-zа-яЁё -]+$/i",e.dataset.pristineRequiredMessage="Заполните это поле.",e.dataset.pristinePatternMessage="Допустимы только буквы, дефисы и пробелы."),t&&(t.closest(".text-field").classList.add("pristine-item"),t.dataset.pristinePattern="/^[a-zа-яЁё -]+$/i",t.dataset.pristineRequiredMessage="Заполните это поле.",t.dataset.pristinePatternMessage="Допустимы только буквы, дефисы и пробелы."),n&&(n.closest(".text-field").classList.add("pristine-item"),n.dataset.pristineRequiredMessage="Заполните это поле."),o&&(o.closest(".text-field").classList.add("pristine-item"),o.dataset.pristineRequiredMessage="Заполните это поле."),i&&(i.closest(".text-field").classList.add("pristine-item"),i.dataset.pristineRequiredMessage="Заполните это поле.",i.dataset.pristineEmailMessage="Введите корректный e-mail адрес."),s&&(s.closest(".text-area").classList.add("pristine-item"),s.dataset.pristineRequiredMessage="Заполните это поле.")}validate(){return this.pristine.validate()}reset(){this.pristine.reset(),this.formElement.querySelectorAll(".shake").forEach((e=>e.classList.remove("shake")))}init(){this.pristine=new Pristine(this.formElement,{classTo:"pristine-item",errorClass:"pristine-item--invalid",errorTextParent:"pristine-item",errorTextTag:"p",errorTextClass:"pristine-item__error-text"})}}class Form extends PubSub{constructor(e){super(),this.formElement=e,this.textFieldControlElements=this.formElement.querySelectorAll(".text-field__control, .simple-form__control, .text-area__control"),this.imagesFieldElement=this.formElement.querySelector(".images-field"),this.imagesFieldListElement=this.formElement.querySelector(".images-field__list"),this.actionUrl=this.formElement.action,this.submitButtonElement=this.formElement.querySelector("[data-submit-button]"),this.validator=new FormValidator(this.formElement),this.siteHeaderElement=document.querySelector(".page__site-header"),this.successHandler=null,this.errorHandler=null,this.imagesFieldErrorTextElement=null,this.init()}setHandlers=(e,t)=>{this.successHandler=e,this.errorHandler=t};resetImagesField=()=>{this.imagesFieldListElement&&(this.imagesFieldListElement.querySelectorAll("img").forEach((e=>{URL.revokeObjectURL(e.src)})),this.imagesFieldListElement.innerHTML=""),this.images&&this.images.clear()};initImagesField=e=>{const t=e.querySelector(".images-field__control"),n=e.querySelector(".images-field__list");this.images=new Set,t.addEventListener("change",(e=>{this.imagesFieldErrorTextElement?.remove();Array.from(e.target.files).forEach((e=>{e.type.startsWith("image/")&&PHOTO_TYPES.some((t=>e.name.toLowerCase().endsWith(t)))?this.images.add(e):(this.imagesFieldErrorTextElement=createElementByString('<p class="images-field__error-text">Не удалось загрузить фото, попробуйте снова</p>'),n.insertAdjacentElement("beforebegin",this.imagesFieldErrorTextElement))})),o()}));const o=()=>{const e=document.createDocumentFragment();this.images.forEach((t=>{const n=createElementByString(`\n          <li class="images-field__list-item">\n            <img class="images-field__preview" src=${URL.createObjectURL(t)} alt=''>\n            <button class="images-field__delete-button image-button image-button--size_xs image-button--primary image-button--icon_cross" type="button">\n              <span class="visually-hidden">Удалить фото</span>\n            </button>\n          </li>\n        `),i=n.querySelector(".images-field__preview");n.querySelector(".images-field__delete-button").addEventListener("click",(e=>{this.images.delete(t),o(),URL.revokeObjectURL(i.src)})),e.append(n)})),n.innerHTML="",n.append(e)}};init=()=>{this.imagesFieldElement&&this.initImagesField(this.imagesFieldElement),this.formElement.addEventListener("submit",(e=>{e.preventDefault();if(this.validator.validate()){console.log("Форма валидна"),this.emit(FormEvents.SUBMIT_START),this.submitButtonElement.disabled=!0,this.submitButtonElement.classList.add("button--pending");const t=new FormData(e.target);this.images?.forEach((e=>{t.append("images[]",e)})),sendData(this.actionUrl,t,(e=>{this.successHandler(e),this.formElement.matches(".modal-entry__form--code")||this.formElement.reset()}),(e=>{this.errorHandler(e)}),(()=>{this.emit(FormEvents.SUBMIT_END),this.submitButtonElement.disabled=!1,this.submitButtonElement.classList.remove("button--pending")}))}else if(console.log("Форма невалидна"),this.formElement.matches(".simple-form")){const e=this.formElement.querySelector(".simple-form__inner");e.classList.remove("shake"),requestAnimationFrame((()=>e.classList.add("shake"))),e.querySelector("input").focus()}else{const e=this.formElement.querySelector(".pristine-item--invalid"),t=e?.closest(".modal");t?t.scrollTo({top:e.offsetTop,behavior:"smooth"}):window.scrollTo({top:e.offsetTop-this.siteHeaderElement.offsetHeight,behavior:"smooth"}),e.querySelector("input, textarea").focus(),e.classList.remove("shake"),requestAnimationFrame((()=>e.classList.add("shake")))}})),this.formElement.addEventListener("reset",(()=>{setTimeout((()=>{this.textFieldControlElements?.forEach((e=>{e.dispatchEvent(inputEvent)})),this.resetImagesField(),this.validator.reset()}),0)}))}}class ModalForm extends Modal{constructor(e){super(e),this.formElement=e.querySelector(".modal-form"),this.form=new Form(this.formElement)}setHandlers=(e,t)=>{this.form.setHandlers((()=>{e(),this.modalElement.close()}),(()=>{t()}))}}class ModalEntry extends Modal{resendTimeInterval=4;timer=0;constructor(e){super(e),this.backButtonElement=e.querySelector(".modal__button--back"),this.backButtonElement.addEventListener("click",(e=>{e.preventDefault(),this.switchStep(1)})),this.codeFormElement=e.querySelector(".modal-entry__form--code"),this.codeForm=new Form(this.codeFormElement),this.phoneFieldElement=this.codeFormElement.querySelector('[data-name="phone"]'),this.loginFormElement=e.querySelector(".modal-entry__form--login"),this.loginForm=new Form(this.loginFormElement),this.currentPhoneTextElement=this.loginFormElement.querySelector("[data-current-phone-text]"),this.codeFieldElement=this.loginFormElement.querySelector('[data-name="code"]'),this.resendElement=this.loginFormElement.querySelector(".modal-form__resend"),this.resendTimerElement=this.resendElement.querySelector(".modal-form__resend-timer"),this.resendButtonElement=this.resendElement.querySelector(".modal-form__resend-button"),this.loginFormSubmitButtonElement=this.loginFormElement.querySelector("[data-submit-button]"),this.codeFieldElement.addEventListener("input",(e=>{e.target.value.length>4&&(e.target.value=e.target.value.slice(0,4)),this.loginFormSubmitButtonElement.classList.contains("button--pending")||(this.loginFormSubmitButtonElement.disabled=!e.target.value)})),this.switchStep(1),this.resendButtonElement.addEventListener("click",(e=>{e.preventDefault(),this.codeFormElement.requestSubmit()}))}startTimer=()=>{if(this.timer<=0){this.timer=this.resendTimeInterval,this.resendTimerElement.textContent=this.timer,this.resendElement.classList.add("modal-form__resend--waiting");const e=setInterval((()=>{this.timer--,this.resendTimerElement.textContent=this.timer,this.timer<=0&&(clearInterval(e),this.resendElement.classList.remove("modal-form__resend--waiting"))}),1e3)}};switchStep=e=>{if(1===e)this.backButtonElement.classList.add("modal__button--hidden"),this.codeFormElement.classList.remove("modal-entry__form--hidden"),this.loginFormElement.classList.add("modal-entry__form--hidden");else if(2===e){this.startTimer();const e=this.phoneFieldElement.value.replace(/[()]/g,"").replace(/-/g," ");this.currentPhoneTextElement.textContent=e,this.backButtonElement.classList.remove("modal__button--hidden"),this.codeFormElement.classList.add("modal-entry__form--hidden"),this.loginFormElement.classList.remove("modal-entry__form--hidden")}}}class Cart{constructor(e){this.siteHeaderElement=document.querySelector(".page__site-header"),this.cartElement=e,this.formElement=this.cartElement.querySelector(".cart__form"),this.init()}toggleFormFooterStickiness=()=>{if(laptopWidthMediaQueryList.matches)return;const e=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),t=document.documentElement.clientHeight+window.scrollY>=e;this.formFooterElement.classList.toggle("cart-form__footer--sticked",!t)};setPageBottomIndent=()=>{if(laptopWidthMediaQueryList.matches)document.body.style.paddingBottom=0;else{const e=parseFloat(getComputedStyle(this.formFooterElement).bottom);document.body.style.paddingBottom=`${this.formFooterElement.offsetHeight+e}px`}};onWindowResize=debounce(this.setPageBottomIndent,500);onWindowScroll=throttle(this.toggleFormFooterStickiness,100);onReceivingMethodSectionChange=e=>{"delivery"===e.target.dataset.value?(this.receivingMethodSectionElement.insertAdjacentElement("afterend",this.deliverySectionElement),this.form.validator.reset(),this.form.validator.init()):(this.deliverySectionElement.remove(),this.form.validator.reset(),this.form.validator.init())};init(){this.formElement&&(this.formFooterElement=this.formElement.querySelector(".cart-form__footer"),this.form=new Form(this.formElement),this.productsList=this.formElement.querySelector(".cart-form__products-list"),this.deliverySectionElement=this.formElement.querySelector("[data-delivery-section]"),this.receivingMethodSectionElement=this.formElement.querySelector("[data-receiving-method-section]"),this.deliverySectionElement.querySelectorAll(".text-field").forEach(initTextField),this.deliverySectionElement.remove(),this.form.validator.init(),this.setPageBottomIndent(),this.toggleFormFooterStickiness(),window.addEventListener("resize",this.onWindowResize),window.addEventListener("scroll",this.onWindowScroll),this.receivingMethodSectionElement.addEventListener("change",this.onReceivingMethodSectionChange))}}function initBannerSlider(e){new Swiper(e,{effect:"fade",fadeEffect:{crossFade:!0},loop:!0,speed:1400,allowTouchMove:!1,autoplay:{delay:1e3,disableOnInteraction:!1}})}function initCatalogNavigation(e){const t=e.querySelector(".catalog-navigation__inner"),n=t.querySelector(".catalog-navigation__list"),o=document.querySelector(".catalog__navigation-opener"),i=window.matchMedia("(min-width: 1280px)");let s=null;function r(){l()}function l(){e.classList.remove("catalog-navigation--open"),s=setTimeout((()=>{e.classList.add("catalog-navigation--hidden"),unlockPageScroll()}),400),i.removeEventListener("change",r)}new SimpleBar(n,{autoHide:!1}),t.addEventListener("click",(e=>{const t=e.target.closest(".catalog-navigation__group-heading");if(t){e.preventDefault();t.closest(".catalog-navigation__group").classList.toggle("catalog-navigation__group--open")}else e.target.closest(".catalog-navigation__close-button")&&l()})),o.addEventListener("click",(t=>{t.preventDefault(),i.matches||lockPageScroll(),clearTimeout(s),e.classList.remove("catalog-navigation--hidden"),setTimeout((()=>{e.classList.add("catalog-navigation--open"),i.addEventListener("change",r)}),0)}))}function initCheckerCardsList(e){const t=Array.from(e.querySelectorAll(".checker-cards__item")),n=()=>{e.style.setProperty("--item-min-height",0),setTimeout((()=>{const n=t.map((e=>e.offsetHeight)),o=`${Math.max(...n)}px`;e.style.setProperty("--item-min-height",o)}),0)};n(),window.addEventListener("resize",debounce(n))}function initDocumentModal(e){initDocument(e.querySelector(".document")),new Modal(e)}function initDocument(e){const t=e.querySelector(".document__content");new SimpleBar(t,{autoHide:!1})}function initDropdown(e){const t=e.querySelector(".dropdown__list-items"),n=window.matchMedia("(min-width: 1280px)");let o=null;function i(t){(t.target.closest(".dropdown")!==e||t.target.matches(".dropdown__list-wrapper"))&&(t.preventDefault(),s())}function s(){e.classList.remove("dropdown--open"),document.removeEventListener("click",i),Modal.openModalsCount||(o=setTimeout((()=>{unlockPageScroll()}),400))}new SimpleBar(t,{autoHide:!1}),e.addEventListener("click",(t=>{if(t.target.closest(".dropdown__toggle-button"))e.classList.contains("dropdown--open")?s():function(){n.matches||Modal.openModalsCount||lockPageScroll();clearTimeout(o),e.classList.add("dropdown--open"),setTimeout((()=>{document.addEventListener("click",i)}),0)}();else{const n=t.target.closest(".dropdown__list-item");if(n){const t=n.querySelector(".dropdown__option-label, .dropdown__link");e.querySelector(".dropdown__toggle-button-text").textContent=t.textContent,t.classList.contains("dropdown__link")&&(e.querySelector(".dropdown__link--active")?.classList.remove("dropdown__link--active"),t.classList.add("dropdown__link--active")),s()}else t.target.closest(".dropdown__close-button")&&s()}}))}const initFolds=e=>{e.addEventListener("click",(e=>{let{target:t}=e;const n=t.closest(".folds__button");if(!n)return;const o=n.closest(".folds__item"),i=o.querySelector(".folds__item-content-wrapper"),s=i.querySelector(".folds__item-content"),r=s.getBoundingClientRect().height;i.style.height=`${r}px`,s.style.position="absolute",setTimeout((()=>{o.classList.toggle("folds__item--open")}),20),n.ariaExpanded="true"===n.ariaExpanded?"false":"true"})),e.addEventListener("transitionend",(e=>{let{target:t}=e;const n=t.closest(".folds__item");n&&n.classList.contains("folds__item--open")&&(t.classList.contains("folds__item-content")&&(t.style.position="static"),t.classList.contains("folds__item-content-wrapper")&&setTimeout((()=>{t.style.height="auto"}),0))}))};async function initLocationsModal(e){const t=e.querySelector(".modal-locations__heading"),n=e.querySelector(".locations__list"),o=n.querySelectorAll(".map"),i=[];for(const e of o){const t=await initMap(e);i.push(t)}new Modal(e,{onOpenerClick:e=>{i.forEach((e=>e.reset()));const o=e.target.closest(".checker-cards__item-label").textContent,s=e.target.dataset.locationId;n.dataset.activeItem=s,t.textContent=o}})}async function initMap(e){const t=e.dataset.latitude,n=e.dataset.longitude,o=e.dataset.zoom,i=[n,t],s=e.querySelector(".map__inner");s.style.filter="hue-rotate(-180deg) grayscale(0.9)",await ymaps3.ready;const{YMap:r,YMapDefaultSchemeLayer:l,YMapMarker:a,YMapDefaultFeaturesLayer:c}=ymaps3,d=new r(s,{location:{center:i,zoom:o}});d.addChild(new l),d.addChild(new c);const m=document.querySelector("#map-marker-template").content.querySelector(".map-marker").cloneNode(!0),u=new a({coordinates:i},m),h=setInterval((()=>{const t=e.querySelector("canvas");t&&(clearInterval(h),t.style.filter="hue-rotate(-180deg) grayscale(0.9)",s.style.filter="",d.addChild(u))}),1e3);return d.reset=()=>{d.setLocation({center:i,zoom:o})},d}function initMenu(e){const t=e.querySelector(".menu__content"),n=document.querySelector(".site-header__burger");new SimpleBar(t,{autoHide:!1});const o=e.querySelector(".simplebar-content-wrapper");n.addEventListener("click",(t=>{t.preventDefault(),lockPageScroll(),o.scrollTop=0,e.showModal()})),e.addEventListener("click",(t=>{(t.target===e||t.target.closest(".menu__button--close"))&&(t.preventDefault(),e.close(),setTimeout((()=>{unlockPageScroll()}),400))}));const i=e.querySelector(".menu__headings"),s=i.querySelectorAll(".menu__heading[data-name]"),r=e.querySelector(".menu__catalog-navigation"),l=r.querySelectorAll(".menu__catalog-navigation-section");i.addEventListener("click",(e=>{const t=e.target.dataset.name;if(t){for(let e=0;e<l.length;e++)s[e].classList.toggle("menu__heading--active",s[e].dataset.name===t),l[e].classList.toggle("menu__catalog-navigation-section--active",l[e].dataset.name===t);o.scrollTop=0}}));const a=[],c=e.querySelector(".menu__heading--group"),d=e.querySelector(".menu__button--back");r.addEventListener("click",(t=>{const n=t.target.closest(".menu__catalog-navigation-button");if(!n)return;c.textContent=n.textContent;const o=n.parentElement,i=o.parentElement.dataset.level;e.dataset.level=+i+1,o.classList.add("menu__catalog-navigation-item--active"),a.push(o)})),d.addEventListener("click",(t=>{t.preventDefault(),e.dataset.level=Math.max(0,+e.dataset.level-1),a.pop()?.classList.remove("menu__catalog-navigation-item--active"),c.textContent=a.at(-1)?.querySelector(".menu__catalog-navigation-button").textContent}))}function initPhoneField(e){function t(e){return e.value.replace(/\D/g,"")}e.addEventListener("input",(function(e){const n=e.target;let o=t(n),i="";const s=n.selectionStart;if(!o)return void(n.value="");if(n.value.length!==s)return void(e.data&&/\D/g.test(e.data)&&(n.value=o));if(!["7","8","9"].includes(o[0]))return void(n.value=`+${o}`.substring(0,16));"9"===o[0]&&(o=`7${o}`),i=`${"8"===o[0]?"8":"+7"} `,o.length>1&&(i+=`(${o.substring(1,4)}`),o.length>=5&&(i+=`) ${o.substring(4,7)}`),o.length>=8&&(i+=`-${o.substring(7,9)}`),o.length>=10&&(i+=`-${o.substring(9,11)}`),n.value=i})),e.addEventListener("keydown",(function(e){const n=e.target;"Backspace"===e.code&&1===t(n).length&&(n.value="",n.dispatchEvent(inputEvent),n.dispatchEvent(changeEvent))})),e.addEventListener("paste",(function(e){const n=e.clipboardData||window.clipboardData,o=e.target,i=t(o);if(n){const e=n.getData("Text");/\D/g.test(e)&&(o.value=i)}}))}function initPhotoSlider(e){const t=e.querySelector(".photo-slider__main-slider"),n=e.querySelector(".photo-slider__thumbnails-slider"),o=new Swiper(n,{watchSlidesProgress:!0,slidesPerView:3,spaceBetween:8,spaceBetween:10,breakpoints:{768:{slidesPerView:6,spaceBetween:8},1366:{slidesPerView:6,spaceBetween:12},1920:{slidesPerView:6,spaceBetween:20}}});new Swiper(t,{effect:"fade",fadeEffect:{crossFade:!0},pagination:{el:".photo-slider__main-slider-pagination",bulletClass:"photo-slider__pagination-button",bulletActiveClass:"photo-slider__pagination-button--current",renderBullet:getPaginationButtonCreator(),clickable:!0},thumbs:{swiper:o,slideThumbActiveClass:"photo-slider__thumbnails-slider-item--active"}})}function initProcessSlider(e){const t=e.querySelector(".process-slider"),n=e.querySelector(".slider-arrows__button--prev"),o=e.querySelector(".slider-arrows__button--next");new Swiper(t,{slidesPerView:2,spaceBetween:15,navigation:{prevEl:n,nextEl:o,disabledClass:"slider-arrows__button--disabled"},breakpoints:{768:{spaceBetween:20},1366:{spaceBetween:30},1920:{spaceBetween:40}}})}function initProductButtons(e){const t=()=>{if(laptopWidthMediaQueryList.matches)return;const t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),n=document.documentElement.clientHeight+window.scrollY>=t;e.classList.toggle("product__buttons--sticked",!n)},n=()=>{if(laptopWidthMediaQueryList.matches)document.body.style.paddingBottom=0;else{const t=parseFloat(getComputedStyle(e).bottom);document.body.style.paddingBottom=`${e.offsetHeight+t}px`}},o=debounce(n,500),i=throttle(t,100);t(),n(),window.addEventListener("scroll",i),window.addEventListener("resize",o)}function initProductNavigation(e){const t=document.querySelector(".page__site-header");e.addEventListener("click",(e=>{e.preventDefault();const n=e.target.getAttribute("href"),o=document.querySelector(n);if(o){const e=o.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:e-t.offsetHeight-20,behavior:"smooth"}),o.matches(".folds__item:not(.folds__item--open)")&&o.querySelector(".folds__button").click()}}))}function initProductsCounters(e){e.addEventListener("click",(e=>{const t=e.target.closest(".counter__button");if(!t)return;const n=t.closest(".counter").querySelector(".counter__control");switch(!0){case t.matches(".counter__button--minus"):n.stepDown();break;case t.matches(".counter__button--plus"):n.stepUp()}n.dispatchEvent(inputEvent),n.dispatchEvent(changeEvent)}))}function initProductsSlider(e){const t=e.querySelector(".products-slider"),n=e.querySelector(".slider-arrows__button--prev"),o=e.querySelector(".slider-arrows__button--next");new Swiper(t,{spaceBetween:15,navigation:{prevEl:n,nextEl:o,disabledClass:"slider-arrows__button--disabled"},watchSlidesProgress:!0,breakpoints:{375:{slidesPerView:2,spaceBetween:15},768:{slidesPerView:3,spaceBetween:15},1280:{slidesPerView:4,spaceBetween:20},1366:{slidesPerView:4,spaceBetween:30},1920:{slidesPerView:4,spaceBetween:40}}})}function createReviewsListItemString(e){const t=new Date(e.date).toLocaleDateString("ru-RU");return`\n    <li class="reviews-list__item">\n      <article class="review">\n        <p class="review__rating">\n          <span class="visually-hidden">Рейтинг: ${e.rating}</span>\n          <span class="stars-icon stars-icon--size_m" data-value="${e.rating}"></span>\n        </p>\n        <div class="review__content">\n          <p>${e.text}</p>\n        </div>\n        <footer class="review__footer">\n          <p class="review__author">${e.author}</p>\n          <time class="review__date" datetime="${e.data}">${t}</time>\n        </footer>\n      </article>\n    </li>\n  `}function showAlert(e){let{heading:t,status:n,mode:o,text:i,buttonText:s}=e;const r=new Alert({heading:t,status:n,mode:o,text:i,buttonText:s});return r.open(),r}function initSimpleForm(e){const t=e.querySelector(".simple-form__control"),n=e.querySelector(".simple-form__button--clear"),o=()=>{e.classList.toggle("simple-form--empty",!t.value)};o(),e.addEventListener("input",(()=>{o()})),n.addEventListener("click",(()=>{t.value="",o(),t.focus()}))}function initSiteHeader(e){const t=e.querySelector(".shortcuts__link--user"),n=e.querySelector(".shortcuts__item--user .shortcuts__menu");let o=null;function i(e){console.log(e.target),(e.target.closest(".shortcuts__menu-close-button")||e.target.closest(".shortcuts__menu-link")||e.target.matches(".shortcuts__menu"))&&r()}function s(){r()}function r(){n.classList.remove("shortcuts__menu--open"),o=setTimeout((()=>{unlockPageScroll()}),400),document.removeEventListener("click",i),laptopWidthMediaQueryList.removeEventListener("change",s)}t.addEventListener("click",(e=>{t.matches("[data-modal-opener]")||laptopWidthMediaQueryList.matches||(e.preventDefault(),lockPageScroll(),clearTimeout(o),n.classList.add("shortcuts__menu--open"),setTimeout((()=>{document.addEventListener("click",i),laptopWidthMediaQueryList.addEventListener("change",s)}),0))}));let l=0;const a=()=>{const t=e.offsetHeight;window.scrollY>0&&e.classList.add("site-header--sticked"),window.scrollY>l&&window.scrollY>t?e.classList.add("site-header--hidden"):(e.classList.remove("site-header--hidden"),0===window.scrollY&&e.classList.remove("site-header--sticked")),l=window.scrollY};window.addEventListener("scroll",a),a();const c=e.querySelector(".site-header__search-form"),d=e.querySelector(".site-header__search-form-outer-wrapper"),m=c.querySelector(".site-header__search-form form"),u=document.querySelector(".site-header__user-navigation-link--search");function h(){desktopWidthMediaQueryList.matches?c.append(m):d.append(m)}desktopWidthMediaQueryList.addEventListener("change",h),h(),u.addEventListener("click",(t=>{t.preventDefault(),e.classList.toggle("site-header--show-outer-search-form")}))}function initTextArea(e){const t=e.querySelector(".text-area__control"),n=()=>{e.classList.toggle("text-area--empty",!t.value)};n(),t.addEventListener("input",(()=>{n()}))}function initTextField(e){const t=e.querySelector(".text-field__control"),n=e.querySelector(".text-field__button--clear"),o=()=>{setTimeout((()=>{e.classList.toggle("text-field--empty",!t.value)}))};o(),t.addEventListener("input",(()=>{o()})),n.addEventListener("click",(()=>{t.value="",o(),t.focus(),t.dispatchEvent(inputEvent),t.dispatchEvent(changeEvent)}))}const laptopWidthMediaQueryList=window.matchMedia("(min-width: 1280px)"),desktopWidthMediaQueryList=window.matchMedia("(min-width: 1366px)"),inputEvent=new Event("input",{bubbles:!0}),changeEvent=new Event("change",{bubbles:!0});initSiteHeader(document.querySelector(".site-header")),document.querySelectorAll(".dropdown").forEach(initDropdown);let cart=null;const cartElement=document.querySelector(".cart");cartElement&&(cart=new Cart(cartElement)),document.querySelectorAll(".banner-slider").forEach(initBannerSlider),document.querySelectorAll(".folds").forEach(initFolds),document.querySelectorAll(".simple-form").forEach(initSimpleForm),document.querySelectorAll(".products").forEach(initProductsSlider),document.querySelectorAll(".process").forEach(initProcessSlider),document.querySelectorAll(".photo-slider").forEach(initPhotoSlider),document.querySelectorAll(".checker-cards__list").forEach(initCheckerCardsList),document.querySelectorAll(".text-field:not(.cart-form [data-delivery-section] .text-field)").forEach(initTextField),document.querySelectorAll(".text-area").forEach(initTextArea),document.querySelectorAll(".catalog-navigation").forEach(initCatalogNavigation),document.querySelectorAll(".menu").forEach(initMenu),document.querySelectorAll('input[type="tel"]').forEach(initPhoneField),document.querySelectorAll(".map:not(.modal .map)").forEach(initMap),document.querySelectorAll('[data-modal="locations"]').forEach((e=>{initLocationsModal(e)})),document.querySelectorAll(".modal--with_document").forEach(initDocumentModal),document.querySelectorAll(".product .page-navigation").forEach(initProductNavigation),document.querySelectorAll(".product__buttons").forEach(initProductButtons),document.querySelectorAll(".product, .products-list, .products-slider__list, .cart-form__products-list").forEach(initProductsCounters);let requestForm=null;const requestFormElement=document.querySelector(".request-form");requestFormElement&&(requestForm=new Form(requestFormElement));let callbackModalForm=null,callbackModalFormElement=document.querySelector('[data-modal="callback-form"]');callbackModalFormElement&&(callbackModalForm=new ModalForm(callbackModalFormElement));let buyModalForm=null,buyModalFormElement=document.querySelector('[data-modal="buy-form"]');buyModalFormElement&&(buyModalForm=new ModalForm(buyModalFormElement));let reviewModalForm=null,reviewModalFormElement=document.querySelector('[data-modal="review-form"]');reviewModalFormElement&&(reviewModalForm=new ModalForm(reviewModalFormElement));let subscriptionForm=null,subscriptionFormElement=document.querySelector(".site-footer__subscription .simple-form");subscriptionFormElement&&(subscriptionForm=new Form(subscriptionFormElement));let modalEntry=null;const modalEntryElement=document.querySelector('[data-modal="entry"]');modalEntryElement&&(modalEntry=new ModalEntry(modalEntryElement));